<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todo App 2</title>
    <link rel="stylesheet" href="index.css">
    
</head>
<body>
    <h1>Todo App</h1>
    <h2 id="date">Date</h2>
    
    <div class="todo-input-grid">
         <input id="text-box" class="name-input" placeholder="Add Todo here" />
        <input type="date" id="due-date" class="due-date-input"/>
        <button onclick="addTodo();" class="add-todo-button">ADD TODO</button>
    </div>
    
    <div id="js-todo-list" class="todo-grid"></div>

    <script>
        // if (typeof(Storage) !== "undefined") {
//   // Store
//   localStorage.setItem("todos", JSON.stringify(todoListHTML));
//   // Retrieve
//   document.getElementById("result").innerHTML = localStorage.getItem("lastname");
// } else {
//   document.getElementById("result").innerHTML = "Sorry, your browser does not support Web Storage...";
//}
        // const savedTodos = JSON.parse(localStorage.getItem('todos'));
       // Check if it's an array
     //   if (Array.isArray(savedTodos)) {
     //     todos = savedTodos;
     //   } else {

function displayDate() {
    let date = new Date();
    date = date.toString().split(" ");
    console.log(date)
    document.querySelector("#date").innerHTML = date[1] + " " + date[2] + ", " + date[3]
}
window.onload = function(){
    displayDate()
}
         const todoList = localStorage.getItem("items") ? JSON.parse(localStorage.getItem("items")) : [{
             name: "Wash Car",
             dueDate: "2023-4-28"
         }, {
             name: "Get Groceries",
             dueDate: "2023-4-30"
         }, {
             name: "Learn Javascript",
             dueDate: "2023-5-20"
         }];
       renderTodoList();
     //     saveTodos()
     //     function saveTodos() {
     //     localStorage.setItem('todos', JSON.stringify(todoList));
     //   }
         function renderTodoList() {
             let todoListHTML = "";
             for (let i = 0; i < todoList.length; i++) {
                 const todoObject = todoList[i]
                 // const name = todoObject.name;
                 // const dueDate = todoObject.dueDate;
                 const {name, dueDate} = todoObject;
                 const html = `
                    <div>${name}</div>
                    <div>${dueDate}</div>
                     <button onclick="
                     todoList.splice(${i}, 1);
                     renderTodoList()";
                     " class="delete-todo-button">Delete</button>`;
                 todoListHTML += html;
                 console.log(todoListHTML)
             }
             document.querySelector("#js-todo-list")
             .innerHTML = todoListHTML;
         }
         
         function addTodo(){
             
             const inputElement = document.querySelector("#text-box");
             const name = inputElement.value;
             
             const dateInputElement = document.querySelector("#due-date");
             const dueDate = dateInputElement.value;
             todoList.push({
                 name,
                 dueDate
             });
            
             inputElement.value = "";
             localStorage.setItem('items', JSON.stringify(todoList)); 
             
             renderTodoList();
             // saveTodos()
             
            
             
         }
    </script>

</body>
</html>